# OpenClaw Budget Manager Configuration
# ============================================================
# Copy this file to .env and modify as needed.
# The plugin auto-loads .env from its directory on startup.
# Shell environment variables take precedence over .env values.
# ============================================================

# Legacy mode (single budget pool)
DAILY_BUDGET_USD=5.00
BUDGET_DATA_DIR=./data

# Chain mode (multi-provider with per-provider budgets)
# Set to "true" to enable provider chain fallback
USE_CHAIN_MODE=false

# Ollama connection
# OLLAMA_URL=http://localhost:11434

# Local model overrides (Ollama)
# LOCAL_MODEL=              # Set one model for all task types
# LOCAL_MODEL_GENERAL=      # Override for general tasks     (default: qwen3:8b)
# LOCAL_MODEL_CODING=       # Override for coding tasks      (default: qwen3-coder:30b)
# LOCAL_MODEL_VISION=       # Override for vision tasks      (default: qwen3-vl:8b)

# ============================================================
# CHAIN MODE: Per-provider API keys
# ============================================================
# Required for each enabled provider in chain mode

# BYTEDANCE_ARK_API_KEY=...       # ByteDance Ark (Seed 2.0)
# OPENROUTER_API_KEY=sk-or-...    # Shared by openrouter-glm and openrouter-qwen
# MINIMAX_API_KEY=...
# MOONSHOT_API_KEY=sk-...
# DEEPSEEK_API_KEY=sk-...
# GEMINI_API_KEY=...              # Note: Google uses GEMINI_API_KEY
# OPENAI_API_KEY=sk-...
# ANTHROPIC_API_KEY=sk-ant-...

# ============================================================
# CHAIN MODE: Per-provider budget overrides (optional)
# ============================================================
# Override the default budgets in provider-chain.json
# Note: hyphens in provider IDs become underscores in env vars

# BYTEDANCE_ARK_DAILY_BUDGET_USD=3.00
# OPENROUTER_GLM_DAILY_BUDGET_USD=3.00
# MINIMAX_DAILY_BUDGET_USD=3.00
# MOONSHOT_DAILY_BUDGET_USD=3.00
# OPENROUTER_QWEN_DAILY_BUDGET_USD=3.00
# DEEPSEEK_DAILY_BUDGET_USD=5.00
# GOOGLE_DAILY_BUDGET_USD=3.00
# OPENAI_DAILY_BUDGET_USD=3.00
# ANTHROPIC_DAILY_BUDGET_USD=5.00

# ============================================================
# CHAIN MODE: Enable/disable providers (optional)
# ============================================================
# Temporarily disable providers without editing provider-chain.json

# BYTEDANCE_ARK_ENABLED=true
# OPENROUTER_GLM_ENABLED=true
# MINIMAX_ENABLED=true
# MOONSHOT_ENABLED=true
# OPENROUTER_QWEN_ENABLED=true
# DEEPSEEK_ENABLED=true
# GOOGLE_ENABLED=true
# OPENAI_ENABLED=true
# ANTHROPIC_ENABLED=true

# ============================================================
# FAILURE TRACKING
# ============================================================
# Consecutive failures before switching provider (default: 3)
# FAILURE_THRESHOLD=3

# ============================================================
# COST OPTIMIZATION (Chain Mode)
# ============================================================
# The plugin injects optimization rules into each request via prependContext.
# When on Anthropic: Sonnet default, Haiku for simple tasks, Opus for complex tasks.
# When on other providers: general rate limit and session rules only.
#
# Set to "true" to disable prompt optimization injection (for troubleshooting)
# DISABLE_PROMPT_OPTIMIZATION=false

# ============================================================
# CONTEXT MANAGEMENT (Session Truncation)
# ============================================================
# Automatically truncates the session JSONL file when context grows
# too large, preventing Anthropic API "context limit exceeded" errors.
# Works in both legacy and chain modes.

# Set to "false" to disable session truncation
# CONTEXT_TRUNCATION_ENABLED=true

# Token threshold to trigger truncation (~120K leaves room for output)
# CONTEXT_MAX_TOKENS=120000

# Minimum number of recent content messages to keep after truncation
# CONTEXT_KEEP_RECENT=20

# Session key in sessions.json (default matches OpenClaw's main agent)
# SESSION_KEY=agent:main:main
